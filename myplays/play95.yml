---
- name: Play to demonstrate handler
  hosts: localhost
  become: true
  remote_user: ansible
  vars:
   pkg_name: httpd
   src_name: httpd
   pport: 99
   web_msg: "Hello From Ansi Bro !"
  tasks: 
  - name: Install {{pkg_name}} in {ansible_hostname}
    yum: 
     name: "{{pkg_name}}"
     state: latest
    notify: web_start 
  - name: Copy the configuration file
    copy:
     src: /home/ansible/ansible_file/vars/myweb.conf
     dest: /etc/httpd/conf.d/myweb.conf
    notify: web_restart 
  - name: create directory for documents 
    file:
     path: /myweb
     state: directory
  - name: create index.html
    template:
     src: template/index.j2
     dest: /myweb/index.html 
      #owner: root
      #group: root
      #mode: '0644'
  - name: Create serverinfo.html file
    template:
     src: template/serverinfo.j2
     dest: /myweb/serverinfo.html
     # Owner: root
     # group: root
     #mode: '0644'

  - name: "Add {{pport}} to firewall"
    firewalld:
     port: "{{pport}}/tcp"
     permanent: yes
     immediate: yes
     state: enabled
  handlers: 
  - name: web_start
    service:
     name: "{{src_name}}"   
     state: started
  - name: web_restart
    service:
     name: "{{src_name}}"
     state: restarted
...   